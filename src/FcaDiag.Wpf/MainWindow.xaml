<Window x:Class="FcaDiag.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="FCA Diagnostics Tool - [Disconnected]"
        Height="800" Width="1400"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        Background="#FF0D1117">

    <Window.Resources>
        <!-- Orange accent color -->
        <Color x:Key="AccentColor">#FFFF6B00</Color>
        <Color x:Key="AccentLightColor">#FFFF8C33</Color>
        <Color x:Key="AccentDarkColor">#FFCC5500</Color>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="AccentLightBrush" Color="{StaticResource AccentLightColor}"/>

        <!-- Orange Button Style -->
        <Style x:Key="OrangeButton" TargetType="Button">
            <Setter Property="Background" Value="#FFFF6B00"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FFFF8C33"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FFCC5500"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#FF3A3A3A"/>
                                <Setter Property="Foreground" Value="#FF666666"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Teal/Cyan Button Style -->
        <Style x:Key="TealButton" TargetType="Button">
            <Setter Property="Background" Value="#FF00A5A5"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF00BFBF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF008080"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#FF3A3A3A"/>
                                <Setter Property="Foreground" Value="#FF666666"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sidebar Button Style -->
        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FF8B949E"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}"
                                BorderThickness="3,0,0,0"
                                BorderBrush="Transparent">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF21262D"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF30363D"/>
                            </Trigger>
                            <Trigger Property="Tag" Value="Active">
                                <Setter TargetName="border" Property="BorderBrush" Value="#FFFF6B00"/>
                                <Setter Property="Background" Value="#FF21262D"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Panel Style -->
        <Style x:Key="DarkPanel" TargetType="Border">
            <Setter Property="Background" Value="#FF161B22"/>
            <Setter Property="BorderBrush" Value="#FF30363D"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="15"/>
        </Style>

        <!-- DataGrid Style -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="#FF0D1117"/>
            <Setter Property="Foreground" Value="#FFC9D1D9"/>
            <Setter Property="BorderBrush" Value="#FF30363D"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="#FF0D1117"/>
            <Setter Property="AlternatingRowBackground" Value="#FF161B22"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#FF30363D"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#FF21262D"/>
            <Setter Property="Foreground" Value="#FF8B949E"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="#FF30363D"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#FF21262D"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Sidebar -->
        <Border Grid.Column="0" Background="#FF161B22" BorderBrush="#FF30363D" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo/Title -->
                <StackPanel Grid.Row="0" Margin="15,20,15,10">
                    <TextBlock Text="FCA DIAGNOSTICS" FontSize="16" FontWeight="Bold" Foreground="#FFFF6B00"/>
                    <TextBlock Text="Vehicle Diagnostic Tool" FontSize="11" Foreground="#FF8B949E" Margin="0,3,0,0"/>
                </StackPanel>

                <!-- Connection Panel -->
                <Border Grid.Row="1" Background="#FF21262D" CornerRadius="6" Margin="10,5" Padding="12">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Ellipse x:Name="statusIndicator" Width="10" Height="10" Fill="#FF666666" Margin="0,0,8,0"/>
                            <TextBlock x:Name="txtConnectionStatus" Text="Disconnected" Foreground="#FF8B949E" FontSize="12"/>
                        </StackPanel>
                        <TextBlock x:Name="txtDeviceName" Text="No device" Foreground="#FF666666" FontSize="11" Margin="18,4,0,0"/>
                        <Button x:Name="btnConnect" Content="Connect Pod" Style="{StaticResource OrangeButton}"
                                Margin="0,10,0,0" HorizontalContentAlignment="Center" Click="BtnConnect_Click"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Menu -->
                <StackPanel Grid.Row="2" Margin="10,15,10,10">
                    <TextBlock Text="DIAGNOSTICS" FontSize="10" FontWeight="SemiBold" Foreground="#FF666666" Margin="5,0,0,8"/>
                    <Button x:Name="btnNavScan" Content="Scan Modules" Style="{StaticResource SidebarButton}"
                            Tag="Active" Click="BtnScanModules_Click"/>
                    <Button x:Name="btnNavDtc" Content="Read DTCs" Style="{StaticResource SidebarButton}"
                            Click="BtnReadDtc_Click"/>
                    <Button x:Name="btnNavClearDtc" Content="Clear DTCs" Style="{StaticResource SidebarButton}"
                            Click="BtnClearDtc_Click"/>

                    <TextBlock Text="PROGRAMMING" FontSize="10" FontWeight="SemiBold" Foreground="#FF666666" Margin="5,20,0,8"/>
                    <Button x:Name="btnNavReadEprom" Content="Read EPROM" Style="{StaticResource SidebarButton}"
                            Click="BtnReadEprom_Click"/>
                    <Button x:Name="btnNavWriteEprom" Content="Write EPROM" Style="{StaticResource SidebarButton}"
                            Click="BtnWriteEprom_Click"/>
                    <Button x:Name="btnNavSwapHw" Content="Swap Hardware" Style="{StaticResource SidebarButton}"
                            Click="BtnSwapHw_Click"/>

                    <TextBlock Text="REPORTS" FontSize="10" FontWeight="SemiBold" Foreground="#FF666666" Margin="5,20,0,8"/>
                    <Button x:Name="btnNavPrintDtc" Content="Print DTC Report" Style="{StaticResource SidebarButton}"
                            Click="BtnPrintDtc_Click"/>
                </StackPanel>

                <!-- Version Info -->
                <StackPanel Grid.Row="3" Margin="15,10,15,15">
                    <TextBlock Text="Version 1.0.0" FontSize="10" Foreground="#FF666666"/>
                    <TextBlock Text="Spot On Auto Diagnostics" FontSize="10" Foreground="#FF666666"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="180"/>
            </Grid.RowDefinitions>

            <!-- Header Bar -->
            <Border Grid.Row="0" Background="#FF161B22" Padding="15,10">
                <Grid>
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="12" Height="12" Fill="#FFFF5F56" Margin="0,0,5,0"/>
                        <Ellipse Width="12" Height="12" Fill="#FFFFBD2E" Margin="0,0,5,0"/>
                        <Ellipse Width="12" Height="12" Fill="#FF27C93F"/>
                    </StackPanel>
                    <TextBlock x:Name="txtTitle" Text="FCA Diagnostics v1.0 - [Disconnected]"
                               Foreground="White" FontSize="13" HorizontalAlignment="Center"/>
                </Grid>
            </Border>

            <!-- Main Content Split -->
            <Grid Grid.Row="1" Margin="10,5,10,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>

                <!-- Terminal/Log Area -->
                <Border Grid.Column="0" Style="{StaticResource DarkPanel}" Margin="0,0,5,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="TERMINAL OUTPUT" Foreground="#FF8B949E" FontSize="11" FontWeight="SemiBold" Margin="0,0,0,10"/>
                        <ScrollViewer Grid.Row="1" x:Name="scrollLog" VerticalScrollBarVisibility="Auto">
                            <TextBlock x:Name="txtTerminal"
                                       FontFamily="Consolas"
                                       FontSize="12"
                                       Foreground="#FF00FFAA"
                                       TextWrapping="Wrap"
                                       Text="> System Ready...&#x0a;> Waiting for vehicle connection..."/>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- DTC List Panel -->
                <Border Grid.Column="1" Style="{StaticResource DarkPanel}" Margin="5,0,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="DIAGNOSTIC TROUBLE CODES" Foreground="#FF8B949E" FontSize="11" FontWeight="SemiBold"/>
                            <TextBlock x:Name="txtDtcCount" Text=" (0)" Foreground="#FF666666" FontSize="11"/>
                        </StackPanel>

                        <DataGrid Grid.Row="1" x:Name="dgDtcList"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserReorderColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Code" Binding="{Binding DisplayCode}" Width="70"/>
                                <DataGridTextColumn Header="Status" Binding="{Binding StatusText}" Width="70"/>
                                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <Button Content="Clear All" Style="{StaticResource TealButton}"
                                    Padding="15,8" Click="BtnClearDtc_Click"/>
                            <Button Content="Print Report" Style="{StaticResource OrangeButton}"
                                    Padding="15,8" Margin="10,0,0,0" Click="BtnPrintDtc_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Bottom Panels -->
            <Grid Grid.Row="2" Margin="10,5,10,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Battery Voltage Monitor -->
                <Border Grid.Column="0" Style="{StaticResource DarkPanel}" Margin="0,0,5,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="BATTERY VOLTAGE MONITOR" Foreground="#FF8B949E" FontSize="11" FontWeight="SemiBold"/>
                            <TextBlock x:Name="txtVoltage" Text=" - --.- V" Foreground="#FF00A5A5" FontSize="11" FontWeight="SemiBold"/>
                        </StackPanel>

                        <Grid Grid.Row="1" Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="35"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Y-Axis Labels -->
                            <StackPanel VerticalAlignment="Stretch">
                                <TextBlock Text="15.0" Foreground="#FF666666" FontSize="9"/>
                                <TextBlock Text="14.5" Foreground="#FF666666" FontSize="9" Margin="0,18,0,0"/>
                                <TextBlock Text="14.0" Foreground="#FF666666" FontSize="9" Margin="0,18,0,0"/>
                                <TextBlock Text="13.5" Foreground="#FF666666" FontSize="9" Margin="0,18,0,0"/>
                            </StackPanel>

                            <!-- Voltage Graph Area -->
                            <Border Grid.Column="1" BorderBrush="#FF30363D" BorderThickness="1" Background="#FF0D1117">
                                <Canvas x:Name="canvasVoltage" ClipToBounds="True"/>
                            </Border>
                        </Grid>
                    </Grid>
                </Border>

                <!-- EPROM Memory Buffer -->
                <Border Grid.Column="1" Style="{StaticResource DarkPanel}" Margin="5,0,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="EPROM MEMORY BUFFER" Foreground="#FF8B949E" FontSize="11" FontWeight="SemiBold"/>

                        <!-- Legend -->
                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,8">
                            <Rectangle Width="16" Height="10" Fill="#FF00A5A5" Margin="0,0,5,0"/>
                            <TextBlock Text="Source" Foreground="#FF8B949E" FontSize="10" Margin="0,0,15,0"/>
                            <Rectangle Width="16" Height="10" Fill="#FF00FF88" Margin="0,0,5,0"/>
                            <TextBlock Text="Written" Foreground="#FF8B949E" FontSize="10"/>
                        </StackPanel>

                        <!-- Memory Buffer Bars -->
                        <Border Grid.Row="2" BorderBrush="#FF30363D" BorderThickness="1" Background="#FF0D1117">
                            <Canvas x:Name="canvasMemory" ClipToBounds="True"/>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>
